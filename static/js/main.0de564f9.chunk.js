(this["webpackJsonpwarehouse-pos"]=this["webpackJsonpwarehouse-pos"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=(n(98),n(183)),s=n(180),l=n(22),u=n(14),d=n(27),j=n(2),b="SHOW_TOTAL",h="HIDE_TOTAL",x="SHOW_ALERT",p="HIDE_ALERT",O=function(e,t){switch(t.type){case b:return console.log("Reducer Show Total"),e.calculate=!0,e;case h:return e.calculate=!1,e;case x:return e.alert=Object(u.a)(Object(u.a)({},e.alert),t.data),e;case p:return e.alert.open=!1,e}},v={calculate:!1,alert:{open:!1,severity:"info",message:""}},f=r.a.createContext(v),m=r.a.createContext(void 0),g=function(e){var t=e.children,n=Object(d.a)(O,v),a=Object(l.a)(n,2),r=a[0],c=a[1];return Object(j.jsx)(f.Provider,{value:r,children:Object(j.jsx)(m.Provider,{value:c,children:t})})},y=function(){var e=r.a.useContext(m);if(void 0===e)throw new Error("useDisplayDispatch must be used within a DisplayProvider");var t=r.a.useCallback((function(){e({type:b})}),[e]),n=r.a.useCallback((function(){e({type:h})}),[e]),a=r.a.useCallback((function(t){e({type:x,data:t})}),[e]),c=r.a.useCallback((function(){e({type:p})}),[e]);return r.a.useMemo((function(){return{showTotal:t,hideTotal:n,showAlert:a,hideAlert:c}}),[t,n,a,c])},_=n(171),C={id:"",name:"",company:"",discount:0},w=r.a.createContext({state:C,dispatch:function(){}}),P=function(e,t){switch(t.type){case"set_contractor":return t.data;case"close":return C}},D=function(e){var t=e.children,n=Object(d.a)(P,C),a=Object(l.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(j.jsx)(w.Provider,{value:r,children:t})},E=function(){var e=r.a.useContext(w);if(void 0===e)throw new Error("useContractor must be used within a ContractorProvider");return e},k="*None*",I=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),N=function(e){return I.format(e/100)},R="SET_PRODUCTS",S="SORT_PRODUCTS",T=function(e,t){switch(t.type){case R:return e.concat(t.data);case S:return e.sort((function(e,t){return e.sku.localeCompare(t.sku)}))}},F=[{id:"",name:"",price:0,sku:k,inventory:1}],q=r.a.createContext(F),A=r.a.createContext(void 0),H=function(e){var t=e.children,n=Object(d.a)(T,F),a=Object(l.a)(n,2),r=a[0],c=a[1];return Object(j.jsx)(q.Provider,{value:r,children:Object(j.jsx)(A.Provider,{value:c,children:t})})},L=function(){return r.a.useContext(q)},U=n(49),J=n(170),W=n(50),M=n.n(W),B=n(186),Q=n(167),z=n(164),G=function(e){var t=e.value,n=e.onChange,a=e.onSubmit;return Object(j.jsx)("form",{onSubmit:a,className:"contractor__form",children:Object(j.jsxs)(z.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsx)(z.a,{item:!0,xs:4,children:Object(j.jsx)(Q.a,{variant:"subtitle1",children:"Contactor ID:"})}),Object(j.jsx)(z.a,{item:!0,xs:8,children:Object(j.jsx)(B.a,{id:"id",variant:"outlined",autoComplete:"off",inputProps:{className:"contractor__form__input"},value:t,onChange:n,required:!0})})]})})};G.defaultProps={value:"",onChange:function(){},onSubmit:function(){}};var K=G,V=function(e){var t=e.contractor;return Object(j.jsxs)(z.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsxs)(z.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(j.jsx)(z.a,{item:!0,xs:4,children:Object(j.jsx)(Q.a,{variant:"subtitle1",children:"Name:"})}),Object(j.jsx)(z.a,{item:!0,xs:8,children:Object(j.jsx)(Q.a,{variant:"body1",children:t.name})})]}),Object(j.jsxs)(z.a,{container:!0,item:!0,xs:12,children:[Object(j.jsx)(z.a,{item:!0,xs:4,children:Object(j.jsx)(Q.a,{variant:"subtitle1",children:"Company:"})}),Object(j.jsx)(z.a,{item:!0,xs:8,children:Object(j.jsx)(Q.a,{variant:"body1",children:t.company})})]})]})};V.defaultProps={contractor:{name:"",company:""}};var X=V,Y=function(){var e=E(),t=e.state,n=e.dispatch,a=y(),r=a.showAlert,c=a.hideTotal;return Object(j.jsx)(J.a,{elevation:3,className:"contractor",children:Object(j.jsxs)(_.a,{maxWidth:"sm",className:"contractor__container",children:[Object(j.jsx)(K,{onSubmit:function(e){var a;e.preventDefault(),(a=t,M.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com","/contractors/").concat(encodeURIComponent(a.id)))).then((function(e){var t=e.data;r({open:!0,severity:"success",message:"Contractor Retrieved"}),c(),n({type:"set_contractor",data:t})})).catch((function(e){r({open:!0,severity:"error",message:"Fail to retrieve Contractor"}),console.log("Error: ".concat(JSON.stringify(e)))}))},onChange:function(e){var a=e.target,r=a.id,c=a.value,o=Object(u.a)(Object(u.a)({},t),{},Object(U.a)({},r,c));n({type:"set_contractor",data:o})},value:t.id}),Object(j.jsx)(X,{contractor:t})]})})},Z=[],$=r.a.createContext({state:Z,dispatch:function(){}}),ee=function(e,t){switch(t.type){case"close":return e=Z;case"add_product":return e.push(Object(u.a)(Object(u.a)({},t.data[0]),{},{quantity:1})),e;case"set_product":return e[t.data.rowIndex]=Object(u.a)(Object(u.a)({},e[t.data.rowIndex]),t.data.product),e;case"remove_product":return e.splice(t.rowIndex,1),e;case"set_quantity":return e[t.data.rowIndex].quantity=t.data.quantity,e;case"reset_quantity":return e[t.rowIndex].quantity=1,e}},te=function(e){var t=e.children,n=Object(d.a)(ee,Z),a=Object(l.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(j.jsx)($.Provider,{value:r,children:t})},ne=function(){var e=r.a.useContext($);if(void 0===e)throw new Error("useInvoice must be used within a InvoiceProvider");return e},ae=n(182),re=n(172),ce=function(){var e=y(),t=e.showTotal,n=e.hideTotal,a=E().dispatch,r=ne().dispatch;return Object(j.jsxs)(ae.a,{display:"flex",flexDirection:"column",className:"order__controls",children:[Object(j.jsx)(ae.a,{p:.5,children:Object(j.jsx)(re.a,{type:"submit",variant:"contained",color:"primary",className:"order__controls__button",onClick:function(e){e.preventDefault(),t()},children:"Calculate"})}),Object(j.jsx)(ae.a,{p:.5,flexGrow:1,children:Object(j.jsx)(re.a,{type:"print",variant:"contained",color:"primary",className:"order__controls__button",children:"Print"})}),Object(j.jsx)(ae.a,{p:.5,children:Object(j.jsx)(re.a,{type:"clear",variant:"contained",color:"secondary",className:"order__controls__button",onClick:function(e){e.preventDefault(),n(),a({type:"close"}),r({type:"close"})},children:"Close"})})]})},oe=n(177),ie=n(178),se=n(179),le=n(174),ue=n(173),de=n(175),je=n(176),be=n(76),he=n.n(be),xe=function(e){var t=e.onClick;return console.log("RENDERED: OrderTableHeader"),Object(j.jsxs)(ue.a,{children:[Object(j.jsxs)(le.a,{children:[Object(j.jsx)(de.a,{align:"center",children:Object(j.jsx)(je.a,{size:"small",color:"primary","aria-label":"add to invoice",onClick:t,children:Object(j.jsx)(he.a,{})})}),Object(j.jsx)(de.a,{align:"center",colSpan:3,children:"Order Form"}),Object(j.jsx)(de.a,{align:"right",children:"Price"})]}),Object(j.jsxs)(le.a,{children:[Object(j.jsx)(de.a,{children:"Part No."}),Object(j.jsx)(de.a,{children:"Desc"}),Object(j.jsx)(de.a,{align:"right",children:"Qty."}),Object(j.jsx)(de.a,{align:"right",children:"Unit"}),Object(j.jsx)(de.a,{align:"right",children:"Sum"})]})]})};xe.defaultProps={onClick:function(){}};var pe=xe,Oe=n(181),ve=n(191),fe=function(e){var t=e.rowIndex,n=y().hideTotal,a=L(),c=ne().dispatch,o=r.a.useState(0),i=Object(l.a)(o,2),s=i[0],u=i[1];return console.log("RENDERED: ProductSelect (".concat(t,")")),Object(j.jsx)(Oe.a,{variant:"outlined",inputProps:{className:"order__form__table__product__select"},value:s,onChange:function(e){var r=e.target.value,o=a[r],i={product:o,rowIndex:t};o.sku===k?c({type:"remove_product",rowIndex:t}):(u(r),n(),c({type:"set_product",data:i}),c({type:"reset_quantity",rowIndex:t}))},children:a.map((function(e,t){return Object(j.jsx)(ve.a,{value:t,children:e.sku},t)}))})},me=function(e){var t=e.rowIndex,n=e.inventory,a=e.quantity,r=y(),c=r.hideTotal,o=r.showAlert,i=ne().dispatch;return console.log("RENDERED: ProductQuantityInput (".concat(t,")")),Object(j.jsx)(B.a,{type:"number",variant:"outlined",label:"Avail: ".concat(n),inputProps:{min:0,max:n+1,className:"order__form__table__product__input"},onChange:function(e){var a=e.target.value,r={rowIndex:t,quantity:a};a<1?(c(),i({type:"remove_product",rowIndex:t})):a>n?o({open:!0,severity:"warning",message:"Not enough in inventory."}):(console.log(r),c(),i({type:"set_quantity",data:r}))},value:a})},ge=function(e){var t=e.product,n=e.index;return console.log("RENDERED: ProductRow (".concat(n,")")),Object(j.jsxs)(le.a,{children:[Object(j.jsx)(de.a,{children:Object(j.jsx)(fe,{rowIndex:n})}),Object(j.jsx)(de.a,{children:t.name}),Object(j.jsx)(de.a,{align:"right",children:Object(j.jsx)(me,{rowIndex:n,inventory:t.inventory,quantity:t.quantity})}),Object(j.jsx)(de.a,{align:"right",children:N(t.price)}),Object(j.jsx)(de.a,{align:"right",children:N(t.quantity*t.price)})]})},ye=r.a.memo(ge),_e=function(e){var t=e.invoice,n=e.discountRate,a=r.a.useMemo((function(){return e=function(e,t){var n={subtotal:0,discount:0,taxes:0,total:0,discountRate:t};return e&&e.length>0&&(n.subtotal=e.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t}),0),n.discount=t*n.subtotal,n.taxes=.085*n.subtotal,n.total=n.subtotal+n.taxes-n.discount),n}(t,n),Object(u.a)(Object(u.a)({},e),{},{taxPercentage:"".concat(8.5.toFixed(1)," %"),discountPercentage:"".concat((100*e.discountRate).toFixed(1)," %"),subtotalFormatted:N(e.subtotal),discountFormatted:"(".concat(N(e.discount),")"),taxesFormatted:N(e.taxes),totalFormatted:N(e.total)});var e}),[t,n]),c=a.subtotalFormatted,o=a.discountFormatted,i=a.taxesFormatted,s=a.totalFormatted,l=a.taxPercentage,d=a.discountPercentage;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(le.a,{children:[Object(j.jsx)(de.a,{rowSpan:4,colSpan:2}),Object(j.jsx)(de.a,{colSpan:2,children:"Subtotal"}),Object(j.jsx)(de.a,{align:"right",children:c})]}),Object(j.jsxs)(le.a,{children:[Object(j.jsx)(de.a,{children:"Discount"}),Object(j.jsx)(de.a,{align:"right",children:d}),Object(j.jsx)(de.a,{align:"right",className:"order__table_cell--discount",children:o})]}),Object(j.jsxs)(le.a,{children:[Object(j.jsx)(de.a,{children:"Tax"}),Object(j.jsx)(de.a,{align:"right",children:l}),Object(j.jsx)(de.a,{align:"right",children:i})]}),Object(j.jsxs)(le.a,{children:[Object(j.jsx)(de.a,{colSpan:2,children:"Total"}),Object(j.jsx)(de.a,{align:"right",children:s})]})]})};_e.defaultProps={invoice:[],discountRate:0};var Ce=_e,we=n(77),Pe=n(188),De=n(6),Ee=n.n(De),ke=n(184),Ie=function(e){return Object(j.jsx)(ke.a,Object(u.a)({elevation:6,variant:"filled"},e))};Ie.propTpes={onClose:Ee.a.func,severity:Ee.a.string,children:Ee.a.element.isRequired},Ie.defaultProps={onClose:function(){},severity:"info"};var Ne=Ie,Re=function(e){var t=e.alert,n=e.onClose,a=e.duration,r=Object(we.a)(e,["alert","onClose","duration"]);return Object(j.jsx)(Pe.a,Object(u.a)(Object(u.a)({open:t.open,autoHideDuration:a,onClose:n},r),{},{children:Object(j.jsx)(Ne,{onClose:n,severity:t.severity,children:t.message})}))};Re.defaultProps={alert:{open:!1,severity:"info",message:""},onClose:function(){},duration:6e3};var Se=Re,Te=function(){var e=r.a.useContext(f),t=e.calculate,n=e.alert,a=y(),c=a.hideAlert,o=a.hideTotal,i=a.showAlert,s=E().state,l=ne(),u=l.state,d=l.dispatch,b=L(),h=function(){var e=r.a.useContext(A);if(void 0===e)throw new Error("useProductDispatch must be used within a ProductProvider");var t=r.a.useCallback((function(t){e({type:R,data:t})}),[e]),n=r.a.useCallback((function(){e({type:S})}),[e]);return r.a.useMemo((function(){return{setProducts:t,sortProducts:n}}),[t,n])}().setProducts,x=r.a.useCallback((function(e){e.preventDefault(),console.log(b),b.length>1?(o(),d({type:"add_product",data:b})):M.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com","/products")).then((function(e){var t=e.data;t.length>0?(t.sort((function(e,t){return e.sku.localeCompare(t.sku)})),o(),h(t),d({type:"add_product",data:t})):i({open:!0,severity:"warning",message:"No products in system"})})).catch((function(e){i({open:!0,severity:"error",message:"Fail to retrieve Products"}),console.log("Error: ".concat(JSON.stringify(e)))}))}),[b,d,o,h,i]);r.a.useEffect((function(){!function(e){var t=!1,n={},a=e.length;if(a>1)for(var r=0;r<a;r++)if(e[r].sku!==k){if(n[e[r].sku]){t=!0;break}n[e[r].sku]=!0}return t}(u)?c():i({open:!0,severity:"warning",message:"Duplicate product in cart"})}),[i,c,u]);return console.log("RENDERED: OrderForm"),Object(j.jsxs)(oe.a,{component:J.a,elevation:3,className:"order__form",children:[Object(j.jsxs)(ie.a,{"aria-label":"order product",children:[Object(j.jsx)(pe,{onClick:x}),u.length>0&&Object(j.jsxs)(se.a,{children:[u.map((function(e,t){return Object(j.jsx)(ye,{index:t,product:e,onChange:function(e){}},t)})),t&&Object(j.jsx)(Ce,{invoice:u,discountRate:s.discount})]})]}),Object(j.jsx)(Se,{alert:n,onClose:function(e,t){"clickaway"!==t&&c()}})]})},Fe=function(){return console.log("RENDERED: OrderSection"),Object(j.jsx)(te,{children:Object(j.jsx)("form",{children:Object(j.jsxs)(z.a,{container:!0,justify:"space-between",alignItems:"center",spacing:2,children:[Object(j.jsx)(z.a,{item:!0,md:4,xs:12,children:Object(j.jsx)(ce,{})}),Object(j.jsx)(z.a,{item:!0,md:8,xs:12,children:Object(j.jsx)(Te,{})})]})})})},qe=function(){return Object(j.jsx)(_.a,{maxWidth:!1,className:"landing",children:Object(j.jsxs)(D,{children:[Object(j.jsx)(Y,{}),Object(j.jsx)(H,{children:Object(j.jsx)(Fe,{})})]})})};var Ae=function(){return Object(j.jsx)(i.b,{injectFirst:!0,children:Object(j.jsxs)(g,{children:[Object(j.jsx)(s.a,{}),Object(j.jsx)(qe,{})]})})},He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(j.jsx)(Ae,{}),document.getElementById("root")),He()},98:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.0de564f9.chunk.js.map