(this["webpackJsonpwarehouse-pos"]=this["webpackJsonpwarehouse-pos"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(10),i=n.n(r),o=(n(98),n(183)),s=n(180),l=n(22),d=n(14),u=n(27),j=n(2),b="SHOW_TOTAL",h="HIDE_TOTAL",x="SHOW_ALERT",O="HIDE_ALERT",m=function(e,t){switch(t.type){case b:return console.log("Reducer Show Total"),e.calculate=!0,e;case h:return e.calculate=!1,e;case x:return e.alert=Object(d.a)(Object(d.a)({},e.alert),t.data),e;case O:return e.alert.open=!1,e}},p={calculate:!1,alert:{open:!1,severity:"info",message:""}},v=a.a.createContext(p),f=a.a.createContext(void 0),g=function(e){var t=e.children,n=Object(u.a)(m,p),c=Object(l.a)(n,2),a=c[0],r=c[1];return Object(j.jsx)(v.Provider,{value:a,children:Object(j.jsx)(f.Provider,{value:r,children:t})})},y=function(){var e=a.a.useContext(f);if(void 0===e)throw new Error("useDisplayDispatch must be used within a DisplayProvider");var t=a.a.useCallback((function(){e({type:b})}),[e]),n=a.a.useCallback((function(){e({type:h})}),[e]),c=a.a.useCallback((function(t){e({type:x,data:t})}),[e]),r=a.a.useCallback((function(){e({type:O})}),[e]);return a.a.useMemo((function(){return{showTotal:t,hideTotal:n,showAlert:c,hideAlert:r}}),[t,n,c,r])},_=n(171),C={id:"",name:"",company:"",discount:0},w=a.a.createContext({state:C,dispatch:function(){}}),N=function(e,t){switch(t.type){case"set_contractor":return t.data;case"close":return C}},P=function(e){var t=e.children,n=Object(u.a)(N,C),c=Object(l.a)(n,2),a={state:c[0],dispatch:c[1]};return Object(j.jsx)(w.Provider,{value:a,children:t})},k=function(){var e=a.a.useContext(w);if(void 0===e)throw new Error("useContractor must be used within a ContractorProvider");return e},D="*None*",I={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1},S=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),E=function(e){return S.format(e/100)},T=function(e,t){var n={subtotal:0,discount:0,taxes:0,total:0,discountRate:t};return e&&e.length>0&&(n.subtotal=e.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t}),0),n.discount=t*n.subtotal,n.taxes=.085*n.subtotal,n.total=n.subtotal+n.taxes-n.discount),n},F=function(e){return Object(d.a)(Object(d.a)({},e),{},{taxPercentage:"".concat(8.5.toFixed(1)," %"),discountPercentage:"".concat((100*e.discountRate).toFixed(1)," %"),subtotalFormatted:E(e.subtotal),discountFormatted:"(".concat(E(e.discount),")"),taxesFormatted:E(e.taxes),totalFormatted:E(e.total)})},R="SET_PRODUCTS",q="SORT_PRODUCTS",A=function(e,t){switch(t.type){case R:return e.concat(t.data);case q:return e.sort((function(e,t){return e.sku.localeCompare(t.sku)}))}},H=[{id:"",name:"",price:0,sku:D,inventory:1}],L=a.a.createContext(H),U=a.a.createContext(void 0),M=function(e){var t=e.children,n=Object(u.a)(A,H),c=Object(l.a)(n,2),a=c[0],r=c[1];return Object(j.jsx)(L.Provider,{value:a,children:Object(j.jsx)(U.Provider,{value:r,children:t})})},W=function(){return a.a.useContext(L)},B=n(49),J=n(170),z=n(50),Q=n.n(z),G=n(186),K=n(167),V=n(164),X=function(e){var t=e.value,n=e.onChange,c=e.onSubmit;return Object(j.jsx)("form",{onSubmit:c,className:"contractor__form",children:Object(j.jsxs)(V.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsx)(V.a,{item:!0,xs:4,children:Object(j.jsx)(K.a,{variant:"subtitle1",children:"Contactor ID:"})}),Object(j.jsx)(V.a,{item:!0,xs:8,children:Object(j.jsx)(G.a,{id:"id",variant:"outlined",autoComplete:"off",inputProps:{className:"contractor__form__input"},value:t,onChange:n,required:!0})})]})})};X.defaultProps={value:"",onChange:function(){},onSubmit:function(){}};var Y=X,Z=function(e){var t=e.contractor;return Object(j.jsxs)(V.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsxs)(V.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(j.jsx)(V.a,{item:!0,xs:4,children:Object(j.jsx)(K.a,{variant:"subtitle1",children:"Name:"})}),Object(j.jsx)(V.a,{item:!0,xs:8,children:Object(j.jsx)(K.a,{variant:"body1",children:t.name})})]}),Object(j.jsxs)(V.a,{container:!0,item:!0,xs:12,children:[Object(j.jsx)(V.a,{item:!0,xs:4,children:Object(j.jsx)(K.a,{variant:"subtitle1",children:"Company:"})}),Object(j.jsx)(V.a,{item:!0,xs:8,children:Object(j.jsx)(K.a,{variant:"body1",children:t.company})})]})]})};Z.defaultProps={contractor:{name:"",company:""}};var $=Z,ee=function(){var e=k(),t=e.state,n=e.dispatch,c=y(),a=c.showAlert,r=c.hideTotal;return Object(j.jsx)(J.a,{elevation:3,className:"contractor",children:Object(j.jsxs)(_.a,{maxWidth:"sm",className:"contractor__container",children:[Object(j.jsx)(Y,{onSubmit:function(e){var c;e.preventDefault(),(c=t,Q.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com","/contractors/").concat(encodeURIComponent(c.id)))).then((function(e){var t=e.data;a({open:!0,severity:"success",message:"Contractor Retrieved"}),r(),n({type:"set_contractor",data:t})})).catch((function(e){a({open:!0,severity:"error",message:"Fail to retrieve Contractor"}),console.log("Error: ".concat(JSON.stringify(e)))}))},onChange:function(e){var c=e.target,a=c.id,r=c.value,i=Object(d.a)(Object(d.a)({},t),{},Object(B.a)({},a,r));n({type:"set_contractor",data:i})},value:t.id}),Object(j.jsx)($,{contractor:t})]})})},te=[],ne=a.a.createContext({state:te,dispatch:function(){}}),ce=function(e,t){switch(t.type){case"close":return e=te;case"add_product":return e.push(Object(d.a)(Object(d.a)({},t.data[0]),{},{quantity:1})),e;case"set_product":return e[t.data.rowIndex]=Object(d.a)(Object(d.a)({},e[t.data.rowIndex]),t.data.product),e;case"remove_product":return e.splice(t.rowIndex,1),e;case"set_quantity":return e[t.data.rowIndex].quantity=t.data.quantity,e;case"reset_quantity":return e[t.rowIndex].quantity=1,e}},ae=function(e){var t=e.children,n=Object(u.a)(ce,te),c=Object(l.a)(n,2),a={state:c[0],dispatch:c[1]};return Object(j.jsx)(ne.Provider,{value:a,children:t})},re=function(){var e=a.a.useContext(ne);if(void 0===e)throw new Error("useInvoice must be used within a InvoiceProvider");return e},ie=n(182),oe=n(172),se=function(e){var t=e.contractor,n=e.invoice,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;return new Intl.DateTimeFormat("en-US",t).format(e)}(new Date),r=a.a.useMemo((function(){return F(T(n,t.discount))}),[n,t.discount]),i=r.subtotalFormatted,o=r.discountFormatted,s=r.taxesFormatted,l=r.totalFormatted,d=r.taxPercentage,u=r.discountPercentage;return Object(j.jsx)("iframe",{id:"invoiceIframe",title:"invoice",style:{height:"0px",width:"0px",position:"absolute",visibility:"hidden"},children:Object(j.jsxs)("div",{id:"invoiceContents",children:[Object(j.jsx)("style",{type:"text/css",media:"print",children:"\n          @page { margin-top: 2cm; size: landscape; }\n          table { padding-top: 1cm; width: 100%; }\n          .date { padding-bottom: 1cm; }\n          .left { text-align: left; }\n          .center { text-align: center; }\n          .right { text-align: right; }\n          .discount { color: red; }\n          .bold { font-weight: bold; }\n          .blank { height: 1cm; }\n        "}),Object(j.jsxs)("div",{className:"date",children:[Object(j.jsx)("label",{className:"bold",children:"Invoice Date: "}),Object(j.jsx)("span",{children:c})]}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{className:"bold",children:"Contractor ID: "}),Object(j.jsx)("span",{children:t.id})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{className:"bold",children:"Name: "}),Object(j.jsx)("span",{children:t.name})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{className:"bold",children:"Company: "}),Object(j.jsx)("span",{children:t.company})]})]}),Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"left",children:"Part No."}),Object(j.jsx)("th",{className:"left",children:"Description"}),Object(j.jsx)("th",{children:"Quantity"}),Object(j.jsx)("th",{className:"right",children:"Unit Price"}),Object(j.jsx)("th",{className:"right",children:"Sum"})]})}),Object(j.jsxs)("tbody",{children:[n.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.sku}),Object(j.jsx)("td",{children:e.name}),Object(j.jsx)("td",{align:"center",children:e.quantity}),Object(j.jsx)("td",{align:"right",children:E(e.price)}),Object(j.jsx)("td",{align:"right",children:E(e.price*e.quantity)})]},e.sku)})),Object(j.jsx)("tr",{className:"blank",children:Object(j.jsx)("td",{colSpan:5})}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{rowSpan:4,colSpan:2}),Object(j.jsx)("td",{colSpan:2,className:"bold",children:"Subtotal"}),Object(j.jsx)("td",{align:"right",className:"bold",children:i})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"bold",children:"Discount"}),Object(j.jsx)("td",{align:"right",children:u}),Object(j.jsx)("td",{align:"right",className:"bold discount",children:o})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"bold",children:"Tax"}),Object(j.jsx)("td",{align:"right",children:d}),Object(j.jsx)("td",{align:"right",className:"bold",children:s})]}),Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{colSpan:2,className:"bold",children:"Total"}),Object(j.jsx)("td",{align:"right",className:"bold",children:l})]})]})]})]})})};se.defaultProps={contractor:{id:"TSLA",name:"Elon Musk",company:"Tesla, Inc.",discount:.05},invoice:[{id:"1",name:"Intelligent Frozen Cheese",price:25,sku:"fcb3659b-cbe9-43b9-9276-e1a82b17cc1b",inventory:77,quantity:50},{id:"2",name:"Tasty Concrete Bacon",price:81,sku:"346f0e04-73fb-47ba-95b9-ba83473fe5ae",inventory:65,quantity:25},{id:"3",name:"Handcrafted Metal Towels",price:45,sku:"3124da7e-c212-4657-8df8-7fc0a144b503",inventory:98,quantity:75}]};var le=a.a.memo(se),de=function(){var e=y(),t=e.showTotal,n=e.hideTotal,c=k().dispatch,a=re().dispatch;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(le,{}),Object(j.jsxs)(ie.a,{display:"flex",flexDirection:"column",className:"order__controls",children:[Object(j.jsx)(ie.a,{p:.5,children:Object(j.jsx)(oe.a,{type:"submit",variant:"contained",color:"primary",className:"order__controls__button",onClick:function(e){e.preventDefault(),t()},children:"Calculate"})}),Object(j.jsx)(ie.a,{p:.5,flexGrow:1,children:Object(j.jsx)(oe.a,{type:"print",variant:"contained",color:"primary",className:"order__controls__button",onClick:function(){var e=document.getElementById("invoiceIframe"),t=e.contentWindow,n=e.innerHTML;console.log(n),t.document.open(),t.document.write(n),t.document.close(),t.focus(),t.print()},children:"Print"})}),Object(j.jsx)(ie.a,{p:.5,children:Object(j.jsx)(oe.a,{type:"clear",variant:"contained",color:"secondary",className:"order__controls__button",onClick:function(e){e.preventDefault(),n(),c({type:"close"}),a({type:"close"})},children:"Close"})})]})]})},ue=n(177),je=n(178),be=n(179),he=n(174),xe=n(173),Oe=n(175),me=n(176),pe=n(76),ve=n.n(pe),fe=function(e){var t=e.onClick;return console.log("RENDERED: OrderTableHeader"),Object(j.jsxs)(xe.a,{children:[Object(j.jsxs)(he.a,{children:[Object(j.jsx)(Oe.a,{align:"center",children:Object(j.jsx)(me.a,{size:"small",color:"primary","aria-label":"add to invoice",onClick:t,children:Object(j.jsx)(ve.a,{})})}),Object(j.jsx)(Oe.a,{align:"center",colSpan:3,children:"Order Form"}),Object(j.jsx)(Oe.a,{align:"right",children:"Price"})]}),Object(j.jsxs)(he.a,{children:[Object(j.jsx)(Oe.a,{children:"Part No."}),Object(j.jsx)(Oe.a,{children:"Desc"}),Object(j.jsx)(Oe.a,{align:"right",children:"Qty."}),Object(j.jsx)(Oe.a,{align:"right",children:"Unit"}),Object(j.jsx)(Oe.a,{align:"right",children:"Sum"})]})]})};fe.defaultProps={onClick:function(){}};var ge=fe,ye=n(181),_e=n(191),Ce=function(e){var t=e.rowIndex,n=y().hideTotal,c=W(),r=re().dispatch,i=a.a.useState(0),o=Object(l.a)(i,2),s=o[0],d=o[1];return console.log("RENDERED: ProductSelect (".concat(t,")")),Object(j.jsx)(ye.a,{variant:"outlined",inputProps:{className:"order__form__table__product__select"},value:s,onChange:function(e){var a=e.target.value,i=c[a],o={product:i,rowIndex:t};i.sku===D?r({type:"remove_product",rowIndex:t}):(d(a),n(),r({type:"set_product",data:o}),r({type:"reset_quantity",rowIndex:t}))},children:c.map((function(e,t){return Object(j.jsx)(_e.a,{value:t,children:e.sku},t)}))})},we=function(e){var t=e.rowIndex,n=e.inventory,c=e.quantity,a=y(),r=a.hideTotal,i=a.showAlert,o=re().dispatch;return console.log("RENDERED: ProductQuantityInput (".concat(t,")")),Object(j.jsx)(G.a,{type:"number",variant:"outlined",label:"Avail: ".concat(n),inputProps:{min:0,max:n+1,className:"order__form__table__product__input"},onChange:function(e){var c=e.target.value,a={rowIndex:t,quantity:c};c<1?(r(),o({type:"remove_product",rowIndex:t})):c>n?i({open:!0,severity:"warning",message:"Not enough in inventory."}):(console.log(a),r(),o({type:"set_quantity",data:a}))},value:c})},Ne=function(e){var t=e.product,n=e.index;return console.log("RENDERED: ProductRow (".concat(n,")")),Object(j.jsxs)(he.a,{children:[Object(j.jsx)(Oe.a,{children:Object(j.jsx)(Ce,{rowIndex:n})}),Object(j.jsx)(Oe.a,{children:t.name}),Object(j.jsx)(Oe.a,{align:"right",children:Object(j.jsx)(we,{rowIndex:n,inventory:t.inventory,quantity:t.quantity})}),Object(j.jsx)(Oe.a,{align:"right",children:E(t.price)}),Object(j.jsx)(Oe.a,{align:"right",children:E(t.quantity*t.price)})]})},Pe=a.a.memo(Ne),ke=function(e){var t=e.invoice,n=e.discountRate,c=a.a.useMemo((function(){return F(T(t,n))}),[t,n]),r=c.subtotalFormatted,i=c.discountFormatted,o=c.taxesFormatted,s=c.totalFormatted,l=c.taxPercentage,d=c.discountPercentage;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(he.a,{children:[Object(j.jsx)(Oe.a,{rowSpan:4,colSpan:2}),Object(j.jsx)(Oe.a,{colSpan:2,children:"Subtotal"}),Object(j.jsx)(Oe.a,{align:"right",children:r})]}),Object(j.jsxs)(he.a,{children:[Object(j.jsx)(Oe.a,{children:"Discount"}),Object(j.jsx)(Oe.a,{align:"right",children:d}),Object(j.jsx)(Oe.a,{align:"right",className:"order__table_cell--discount",children:i})]}),Object(j.jsxs)(he.a,{children:[Object(j.jsx)(Oe.a,{children:"Tax"}),Object(j.jsx)(Oe.a,{align:"right",children:l}),Object(j.jsx)(Oe.a,{align:"right",children:o})]}),Object(j.jsxs)(he.a,{children:[Object(j.jsx)(Oe.a,{colSpan:2,children:"Total"}),Object(j.jsx)(Oe.a,{align:"right",children:s})]})]})};ke.defaultProps={invoice:[],discountRate:0};var De=ke,Ie=n(77),Se=n(188),Ee=n(6),Te=n.n(Ee),Fe=n(184),Re=function(e){return Object(j.jsx)(Fe.a,Object(d.a)({elevation:6,variant:"filled"},e))};Re.propTpes={onClose:Te.a.func,severity:Te.a.string,children:Te.a.element.isRequired},Re.defaultProps={onClose:function(){},severity:"info"};var qe=Re,Ae=function(e){var t=e.alert,n=e.onClose,c=e.duration,a=Object(Ie.a)(e,["alert","onClose","duration"]);return Object(j.jsx)(Se.a,Object(d.a)(Object(d.a)({open:t.open,autoHideDuration:c,onClose:n},a),{},{children:Object(j.jsx)(qe,{onClose:n,severity:t.severity,children:t.message})}))};Ae.defaultProps={alert:{open:!1,severity:"info",message:""},onClose:function(){},duration:6e3};var He=Ae,Le=function(){var e=a.a.useContext(v),t=e.calculate,n=e.alert,c=y(),r=c.hideAlert,i=c.hideTotal,o=c.showAlert,s=k().state,l=re(),d=l.state,u=l.dispatch,b=W(),h=function(){var e=a.a.useContext(U);if(void 0===e)throw new Error("useProductDispatch must be used within a ProductProvider");var t=a.a.useCallback((function(t){e({type:R,data:t})}),[e]),n=a.a.useCallback((function(){e({type:q})}),[e]);return a.a.useMemo((function(){return{setProducts:t,sortProducts:n}}),[t,n])}().setProducts,x=a.a.useCallback((function(e){e.preventDefault(),console.log(b),b.length>1?(i(),u({type:"add_product",data:b})):Q.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com","/products")).then((function(e){var t=e.data;t.length>0?(t.sort((function(e,t){return e.sku.localeCompare(t.sku)})),i(),h(t),u({type:"add_product",data:t})):o({open:!0,severity:"warning",message:"No products in system"})})).catch((function(e){o({open:!0,severity:"error",message:"Fail to retrieve Products"}),console.log("Error: ".concat(JSON.stringify(e)))}))}),[b,u,i,h,o]);a.a.useEffect((function(){!function(e){var t=!1,n={},c=e.length;if(c>1)for(var a=0;a<c;a++)if(e[a].sku!==D){if(n[e[a].sku]){t=!0;break}n[e[a].sku]=!0}return t}(d)?r():o({open:!0,severity:"warning",message:"Duplicate product in cart"})}),[o,r,d]);return console.log("RENDERED: OrderForm"),Object(j.jsxs)(ue.a,{component:J.a,elevation:3,className:"order__form",children:[Object(j.jsxs)(je.a,{"aria-label":"order product",children:[Object(j.jsx)(ge,{onClick:x}),d.length>0&&Object(j.jsxs)(be.a,{children:[d.map((function(e,t){return Object(j.jsx)(Pe,{index:t,product:e,onChange:function(e){}},t)})),t&&Object(j.jsx)(De,{invoice:d,discountRate:s.discount})]})]}),Object(j.jsx)(He,{alert:n,onClose:function(e,t){"clickaway"!==t&&r()}})]})},Ue=function(){return console.log("RENDERED: OrderSection"),Object(j.jsx)(ae,{children:Object(j.jsx)("form",{children:Object(j.jsxs)(V.a,{container:!0,justify:"space-between",alignItems:"center",spacing:2,children:[Object(j.jsx)(V.a,{item:!0,md:4,xs:12,children:Object(j.jsx)(de,{})}),Object(j.jsx)(V.a,{item:!0,md:8,xs:12,children:Object(j.jsx)(Le,{})})]})})})},Me=function(){return Object(j.jsx)(_.a,{maxWidth:!1,className:"landing",children:Object(j.jsxs)(P,{children:[Object(j.jsx)(ee,{}),Object(j.jsx)(M,{children:Object(j.jsx)(Ue,{})})]})})};var We=function(){return Object(j.jsx)(o.b,{injectFirst:!0,children:Object(j.jsxs)(g,{children:[Object(j.jsx)(s.a,{}),Object(j.jsx)(Me,{})]})})},Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(j.jsx)(We,{}),document.getElementById("root")),Be()},98:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.569cef53.chunk.js.map