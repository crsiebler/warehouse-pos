(this["webpackJsonpwarehouse-pos"]=this["webpackJsonpwarehouse-pos"]||[]).push([[0],{122:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(10),i=a.n(r),o=(a(93),a(174)),s=a(171),d=a(17),u=a(26),l=a(2),j={calculate:!1},h=c.a.createContext({state:j,dispatch:function(){}}),b=function(t,e){switch(e.type){case"show_total":return t.calculate=!0,t;case"hide_total":return t.calculate=!1,t;case"show_error":return t}},x=function(t){var e=t.children,a=Object(u.a)(b,j),n=Object(d.a)(a,2),c={state:n[0],dispatch:n[1]};return Object(l.jsx)(h.Provider,{value:c,children:e})},p=function(){var t=c.a.useContext(h);if(void 0===t)throw new Error("useDisplay must be used within a DisplayProvider");return t},O=a(163),m={id:null,name:"",company:"",discount:0},f=c.a.createContext({state:m,dispatch:function(){}}),v=function(t,e){switch(e.type){case"set_contractor":return e.data}},g=function(t){var e=t.children,a=Object(u.a)(v,m),n=Object(d.a)(a,2),c={state:n[0],dispatch:n[1]};return Object(l.jsx)(f.Provider,{value:c,children:e})},_=function(){var t=c.a.useContext(f);if(void 0===t)throw new Error("useContractor must be used within a ContractorProvider");return t},y=[],w=c.a.createContext({state:y,dispatch:function(){}}),C=function(t,e){switch(e.type){case"set_products":return t.concat(e.data);case"sort_products":return t.sort((function(t,e){return t.sku.localeCompare(e.sku)}))}},P=function(t){var e=t.children,a=Object(u.a)(C,y),n=Object(d.a)(a,2),c={state:n[0],dispatch:n[1]};return Object(l.jsx)(w.Provider,{value:c,children:e})},I=function(){var t=c.a.useContext(w);if(void 0===t)throw new Error("useProduct must be used within a ProductProvider");return t},F=a(46),N=a(19),S=a(162),k=a(47),D=a.n(k),q=a(176),E=a(159),J=a(156),R=function(t){var e=t.payload,a=void 0===e?{id:""}:e,n=t.onChange,c=t.onSubmit;return Object(l.jsx)("form",{method:"get",onSubmit:c,className:"contractor__form",children:Object(l.jsxs)(J.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(l.jsx)(J.a,{item:!0,xs:4,children:Object(l.jsx)(E.a,{variant:"subtitle1",children:"Contactor ID:"})}),Object(l.jsx)(J.a,{item:!0,xs:8,children:Object(l.jsx)(q.a,{id:"id",variant:"outlined",inputProps:{className:"contractor__form__input"},value:a.id,onChange:n,required:!0})})]})})},T=function(t){var e=t.contractor,a=void 0===e?{name:"",company:""}:e;return Object(l.jsxs)(J.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(l.jsxs)(J.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(l.jsx)(J.a,{item:!0,xs:4,children:Object(l.jsx)(E.a,{variant:"subtitle1",children:"Name:"})}),Object(l.jsx)(J.a,{item:!0,xs:8,children:Object(l.jsx)(E.a,{variant:"body1",children:a.name})})]}),Object(l.jsxs)(J.a,{container:!0,item:!0,xs:12,children:[Object(l.jsx)(J.a,{item:!0,xs:4,children:Object(l.jsx)(E.a,{variant:"subtitle1",children:"Company:"})}),Object(l.jsx)(J.a,{item:!0,xs:8,children:Object(l.jsx)(E.a,{variant:"body1",children:a.company})})]})]})},U=function(){var t=c.a.useState({id:""}),e=Object(d.a)(t,2),a=e[0],n=e[1],r=_(),i=r.state,o=r.dispatch,s=p().dispatch;return Object(l.jsx)(S.a,{elevation:3,className:"contractor",children:Object(l.jsxs)(O.a,{maxWidth:"sm",className:"contractor__container",children:[Object(l.jsx)(R,{onSubmit:function(t){var e;t.preventDefault(),(e=a,D.a.get("https://60530fba45e4b30017290b42.mockapi.io/api/contractor/".concat(e.id))).then((function(t){var e=t.data;s({type:"hide_total"}),o({type:"set_contractor",data:e})})).catch((function(t){console.log("Error: ".concat(JSON.stringify(t)))}))},onChange:function(t){var e=t.target,c=e.id,r=e.value;n(Object(N.a)(Object(N.a)({},a),{},Object(F.a)({},c,r)))},payload:a}),Object(l.jsx)(T,{contractor:i})]})})},B=[],L=c.a.createContext({state:B,dispatch:function(){}}),W=function(t,e){switch(e.type){case"close":return t;case"add_product":return t.push(Object(N.a)(Object(N.a)({},e.products[0]),{},{quantity:1})),t;case"set_product":return t[e.data.rowIndex]=Object(N.a)(Object(N.a)({},t[e.data.rowIndex]),e.data.product),t;case"remove_product":return t.splice(e.rowIndex,1);case"set_quantity":return t[e.data.rowIndex].quantity=e.data.quantity,t}},z=function(t){var e=t.children,a=Object(u.a)(W,B),n=Object(d.a)(a,2),c={state:n[0],dispatch:n[1]};return Object(l.jsx)(L.Provider,{value:c,children:e})},G=function(){var t=c.a.useContext(L);if(void 0===t)throw new Error("useInvoice must be used within a InvoiceProvider");return t},M=a(173),Q=a(164),A=function(){var t=p().dispatch;return Object(l.jsxs)(M.a,{display:"flex",flexDirection:"column",className:"order__controls",children:[Object(l.jsx)(M.a,{p:.5,children:Object(l.jsx)(Q.a,{type:"submit",variant:"contained",color:"primary",className:"order__controls__button",onClick:function(e){e.preventDefault(),t({type:"show_total"})},children:"Calculate"})}),Object(l.jsx)(M.a,{p:.5,flexGrow:1,children:Object(l.jsx)(Q.a,{type:"print",variant:"contained",color:"primary",className:"order__controls__button",children:"Print"})}),Object(l.jsx)(M.a,{p:.5,children:Object(l.jsx)(Q.a,{type:"clear",variant:"contained",color:"secondary",className:"order__controls__button",children:"Close"})})]})},H=a(169),K=a(170),V=a(166),X=a(165),Y=a(167),Z=a(168),$=a(74),tt=a.n($),et=function(t){var e=t.onClick;return Object(l.jsxs)(X.a,{children:[Object(l.jsxs)(V.a,{children:[Object(l.jsx)(Y.a,{align:"center",children:Object(l.jsx)(Z.a,{size:"small",color:"primary","aria-label":"add to invoice",onClick:e,children:Object(l.jsx)(tt.a,{})})}),Object(l.jsx)(Y.a,{align:"center",colSpan:3,children:"Order Form"}),Object(l.jsx)(Y.a,{align:"right",children:"Price"})]}),Object(l.jsxs)(V.a,{children:[Object(l.jsx)(Y.a,{children:"Part No."}),Object(l.jsx)(Y.a,{children:"Desc"}),Object(l.jsx)(Y.a,{align:"right",children:"Qty."}),Object(l.jsx)(Y.a,{align:"right",children:"Unit"}),Object(l.jsx)(Y.a,{align:"right",children:"Sum"})]})]})},at=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),nt=function(t){return at.format(t/100)},ct=a(172),rt=a(179),it=function(t){var e=t.rowIndex,a=p().dispatch,n=c.a.useState(0),r=Object(d.a)(n,2),i=r[0],o=r[1],s=I().state,u=G().dispatch;return Object(l.jsx)(ct.a,{variant:"outlined",inputProps:{className:"order__form__table__product__select"},value:i,onChange:function(t){var n=t.target.value,c={product:s[n],rowIndex:e};o(n),a({type:"hide_total"}),u({type:"set_product",data:c})},children:s.map((function(t,e){return Object(l.jsx)(rt.a,{value:e,children:t.sku},e)}))})},ot=function(t){var e=t.rowIndex,a=p().dispatch,n=G(),c=n.state,r=n.dispatch;return Object(l.jsx)(q.a,{type:"number",className:"order__form__table__product__input",inputProps:{min:0,max:9999},onChange:function(t){var n=t.target.value,c={rowIndex:e,quantity:parseInt(n)};n<1?(a({type:"hide_total"}),r({type:"remove_product",rowIndex:e})):n>10?console.log("Not enough in inventory"):(a({type:"hide_total"}),r({type:"set_quantity",data:c}))},value:c[e].quantity})},st=function(t){var e=t.product,a=t.index;return Object(l.jsxs)(V.a,{children:[Object(l.jsx)(Y.a,{children:Object(l.jsx)(it,{rowIndex:a})}),Object(l.jsx)(Y.a,{children:e.name}),Object(l.jsx)(Y.a,{align:"right",children:Object(l.jsx)(ot,{rowIndex:a})}),Object(l.jsx)(Y.a,{align:"right",children:nt(e.price)}),Object(l.jsx)(Y.a,{align:"right",children:nt(e.quantity*e.price)})]})},dt=c.a.memo(st),ut=function(t){var e=t.invoice,a=t.discountRate,n=c.a.useMemo((function(){return t=function(t,e){var a={subtotal:0,discount:0,taxes:0,total:0,discountRate:e};return t&&t.length>0&&(a.subtotal=t.map((function(t){return t.price*t.quantity})).reduce((function(t,e){return t+e}),0),a.discount=e*a.subtotal,a.taxes=.085*a.subtotal,a.total=a.subtotal+a.taxes-a.discount),a}(e,a),Object(N.a)(Object(N.a)({},t),{},{taxPercentage:"".concat(8.5.toFixed(1)," %"),discountPercentage:"".concat((100*t.discountRate).toFixed(1)," %"),subtotalFormatted:nt(t.subtotal),discountFormatted:nt(t.discount),taxesFormatted:nt(t.taxes),totalFormatted:nt(t.total)});var t}),[e,a]),r=n.subtotalFormatted,i=n.discountFormatted,o=n.taxesFormatted,s=n.totalFormatted,d=n.taxPercentage,u=n.discountPercentage;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(V.a,{children:[Object(l.jsx)(Y.a,{rowSpan:4,colSpan:2}),Object(l.jsx)(Y.a,{colSpan:2,children:"Subtotal"}),Object(l.jsx)(Y.a,{align:"right",children:r})]}),Object(l.jsxs)(V.a,{children:[Object(l.jsx)(Y.a,{children:"Discount"}),Object(l.jsx)(Y.a,{align:"right",children:u}),Object(l.jsx)(Y.a,{align:"right",children:i})]}),Object(l.jsxs)(V.a,{children:[Object(l.jsx)(Y.a,{children:"Tax"}),Object(l.jsx)(Y.a,{align:"right",children:d}),Object(l.jsx)(Y.a,{align:"right",children:o})]}),Object(l.jsxs)(V.a,{children:[Object(l.jsx)(Y.a,{colSpan:2,children:"Total"}),Object(l.jsx)(Y.a,{align:"right",children:s})]})]})},lt=c.a.memo(ut),jt=function(){var t=p(),e=t.state,a=t.dispatch,n=_().state,r=G(),i=r.state,o=r.dispatch,s=I().state;return c.a.useEffect((function(){console.log(function(t){var e={valid:!0,message:""},a={},n=t.length;if(n>1)for(var c=0;c<n;c++){if(a[t[c].sku]){e={valid:!1,message:"Duplicate product in cart"};break}a[t[c].sku]=!0}return e}(i))}),[i]),Object(l.jsx)(S.a,{elevation:3,className:"order__form",children:Object(l.jsxs)(H.a,{"aria-label":"order product",children:[Object(l.jsx)(et,{onClick:function(t){t.preventDefault(),a({type:"hide_total"}),o({type:"add_product",products:s})}}),Object(l.jsxs)(K.a,{children:[i.map((function(t,e){return Object(l.jsx)(dt,{product:t,index:e},e)})),e.calculate&&Object(l.jsx)(lt,{invoice:i,discountRate:n.discount})]})]})})},ht=function(){var t=I().dispatch;return c.a.useEffect((function(){D.a.get("https://60530fba45e4b30017290b42.mockapi.io/api/product/").then((function(e){var a=e.data;t({type:"set_products",data:a}),t({type:"sort_products",data:a})})).catch((function(t){console.log("Error: ".concat(JSON.stringify(t)))}))}),[t]),Object(l.jsx)(z,{children:Object(l.jsx)("form",{children:Object(l.jsxs)(J.a,{container:!0,justify:"space-between",alignItems:"center",spacing:2,children:[Object(l.jsx)(J.a,{item:!0,md:4,xs:12,children:Object(l.jsx)(A,{})}),Object(l.jsx)(J.a,{item:!0,md:8,xs:12,children:Object(l.jsx)(jt,{})})]})})})},bt=function(){return Object(l.jsx)(O.a,{maxWidth:!1,className:"landing",children:Object(l.jsxs)(g,{children:[Object(l.jsx)(U,{}),Object(l.jsx)(P,{children:Object(l.jsx)(ht,{})})]})})};var xt=function(){return Object(l.jsx)(o.b,{injectFirst:!0,children:Object(l.jsxs)(x,{children:[Object(l.jsx)(s.a,{}),Object(l.jsx)(bt,{})]})})},pt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,180)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),n(t),c(t),r(t),i(t)}))};i.a.render(Object(l.jsx)(xt,{}),document.getElementById("root")),pt()},93:function(t,e,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.2d6ba375.chunk.js.map