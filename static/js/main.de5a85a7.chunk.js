(this["webpackJsonpwarehouse-pos"]=this["webpackJsonpwarehouse-pos"]||[]).push([[0],{127:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=(n(98),n(183)),s=n(180),l=n(22),u=n(14),d=n(27),j=n(2),h="SHOW_TOTAL",b="HIDE_TOTAL",x="SHOW_ALERT",p="HIDE_ALERT",O=function(t,e){switch(e.type){case h:return console.log("Reducer Show Total"),t.calculate=!0,t;case b:return t.calculate=!1,t;case x:return t.alert=Object(u.a)(Object(u.a)({},t.alert),e.data),t;case p:return t.alert.open=!1,t}},v={calculate:!1,alert:{open:!1,severity:"info",message:""}},f=r.a.createContext(v),m=r.a.createContext(void 0),g=function(t){var e=t.children,n=Object(d.a)(O,v),a=Object(l.a)(n,2),r=a[0],c=a[1];return Object(j.jsx)(f.Provider,{value:r,children:Object(j.jsx)(m.Provider,{value:c,children:e})})},y=function(){var t=r.a.useContext(m);if(void 0===t)throw new Error("useDisplayDispatch must be used within a DisplayProvider");var e=r.a.useCallback((function(){t({type:h})}),[t]),n=r.a.useCallback((function(){t({type:b})}),[t]),a=r.a.useCallback((function(e){t({type:x,data:e})}),[t]),c=r.a.useCallback((function(){t({type:p})}),[t]);return r.a.useMemo((function(){return{showTotal:e,hideTotal:n,showAlert:a,hideAlert:c}}),[e,n,a,c])},_=n(171),w={id:"",name:"",company:"",discount:0},C=r.a.createContext({state:w,dispatch:function(){}}),P=function(t,e){switch(e.type){case"set_contractor":return e.data;case"close":return w}},E=function(t){var e=t.children,n=Object(d.a)(P,w),a=Object(l.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(j.jsx)(C.Provider,{value:r,children:e})},D=function(){var t=r.a.useContext(C);if(void 0===t)throw new Error("useContractor must be used within a ContractorProvider");return t},I=[],N=r.a.createContext({state:I,dispatch:function(){}}),k=function(t,e){switch(e.type){case"set_products":return t.concat(e.data);case"sort_products":return t.sort((function(t,e){return t.sku.localeCompare(e.sku)}))}},R=function(t){var e=t.children,n=Object(d.a)(k,I),a=Object(l.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(j.jsx)(N.Provider,{value:r,children:e})},F=function(){var t=r.a.useContext(N);if(void 0===t)throw new Error("useProduct must be used within a ProductProvider");return t},S=n(49),T=n(170),q=n(50),A=n.n(q),H=n(186),L=n(167),J=n(164),U=function(t){var e=t.value,n=t.onChange,a=t.onSubmit;return Object(j.jsx)("form",{onSubmit:a,className:"contractor__form",children:Object(j.jsxs)(J.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsx)(J.a,{item:!0,xs:4,children:Object(j.jsx)(L.a,{variant:"subtitle1",children:"Contactor ID:"})}),Object(j.jsx)(J.a,{item:!0,xs:8,children:Object(j.jsx)(H.a,{id:"id",variant:"outlined",inputProps:{className:"contractor__form__input"},value:e,onChange:n,required:!0})})]})})};U.defaultProps={value:"",onChange:function(){},onSubmit:function(){}};var W=U,B=function(t){var e=t.contractor;return Object(j.jsxs)(J.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsxs)(J.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(j.jsx)(J.a,{item:!0,xs:4,children:Object(j.jsx)(L.a,{variant:"subtitle1",children:"Name:"})}),Object(j.jsx)(J.a,{item:!0,xs:8,children:Object(j.jsx)(L.a,{variant:"body1",children:e.name})})]}),Object(j.jsxs)(J.a,{container:!0,item:!0,xs:12,children:[Object(j.jsx)(J.a,{item:!0,xs:4,children:Object(j.jsx)(L.a,{variant:"subtitle1",children:"Company:"})}),Object(j.jsx)(J.a,{item:!0,xs:8,children:Object(j.jsx)(L.a,{variant:"body1",children:e.company})})]})]})};B.defaultProps={contractor:{name:"",company:""}};var M=B,Q=function(){var t=D(),e=t.state,n=t.dispatch,a=y(),r=a.showAlert,c=a.hideTotal;return Object(j.jsx)(T.a,{elevation:3,className:"contractor",children:Object(j.jsxs)(_.a,{maxWidth:"sm",className:"contractor__container",children:[Object(j.jsx)(W,{onSubmit:function(t){var a;t.preventDefault(),(a=e,A.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com/","/contractors/").concat(encodeURIComponent(a.id)))).then((function(t){var e=t.data;r({open:!0,severity:"success",message:"Contractor Retrieved"}),c(),n({type:"set_contractor",data:e})})).catch((function(t){r({open:!0,severity:"error",message:"Fail to retrieve Contractor"}),console.log("Error: ".concat(JSON.stringify(t)))}))},onChange:function(t){var a=t.target,r=a.id,c=a.value,o=Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},r,c));n({type:"set_contractor",data:o})},value:e.id}),Object(j.jsx)(M,{contractor:e})]})})},z=[],G=r.a.createContext({state:z,dispatch:function(){}}),K=function(t,e){switch(e.type){case"close":return t=z;case"add_product":return t.push(Object(u.a)(Object(u.a)({},e.data[0]),{},{quantity:1})),t;case"set_product":return t[e.data.rowIndex]=Object(u.a)(Object(u.a)({},t[e.data.rowIndex]),e.data.product),t;case"remove_product":return t.splice(e.rowIndex,1),t;case"set_quantity":return t[e.data.rowIndex].quantity=e.data.quantity,t;case"reset_quantity":return t[e.rowIndex].quantity=1,t}},V=function(t){var e=t.children,n=Object(d.a)(K,z),a=Object(l.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(j.jsx)(G.Provider,{value:r,children:e})},X=function(){var t=r.a.useContext(G);if(void 0===t)throw new Error("useInvoice must be used within a InvoiceProvider");return t},Y=n(182),Z=n(172),$=function(){var t=y(),e=t.showTotal,n=t.hideTotal,a=D().dispatch,r=X().dispatch;return Object(j.jsxs)(Y.a,{display:"flex",flexDirection:"column",className:"order__controls",children:[Object(j.jsx)(Y.a,{p:.5,children:Object(j.jsx)(Z.a,{type:"submit",variant:"contained",color:"primary",className:"order__controls__button",onClick:function(t){t.preventDefault(),e()},children:"Calculate"})}),Object(j.jsx)(Y.a,{p:.5,flexGrow:1,children:Object(j.jsx)(Z.a,{type:"print",variant:"contained",color:"primary",className:"order__controls__button",children:"Print"})}),Object(j.jsx)(Y.a,{p:.5,children:Object(j.jsx)(Z.a,{type:"clear",variant:"contained",color:"secondary",className:"order__controls__button",onClick:function(t){t.preventDefault(),n(),a({type:"close"}),r({type:"close"})},children:"Close"})})]})},tt=n(177),et=n(178),nt=n(179),at=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),rt=function(t){return at.format(t/100)},ct=n(174),ot=n(173),it=n(175),st=n(176),lt=n(76),ut=n.n(lt),dt=function(t){var e=t.onClick;return console.log("RENDERED: OrderTableHeader"),Object(j.jsxs)(ot.a,{children:[Object(j.jsxs)(ct.a,{children:[Object(j.jsx)(it.a,{align:"center",children:Object(j.jsx)(st.a,{size:"small",color:"primary","aria-label":"add to invoice",onClick:e,children:Object(j.jsx)(ut.a,{})})}),Object(j.jsx)(it.a,{align:"center",colSpan:3,children:"Order Form"}),Object(j.jsx)(it.a,{align:"right",children:"Price"})]}),Object(j.jsxs)(ct.a,{children:[Object(j.jsx)(it.a,{children:"Part No."}),Object(j.jsx)(it.a,{children:"Desc"}),Object(j.jsx)(it.a,{align:"right",children:"Qty."}),Object(j.jsx)(it.a,{align:"right",children:"Unit"}),Object(j.jsx)(it.a,{align:"right",children:"Sum"})]})]})};dt.defaultProps={onClick:function(){}};var jt=dt,ht=n(181),bt=n(191),xt=function(t){var e=t.rowIndex,n=y().hideTotal,a=F().state,c=X().dispatch,o=r.a.useState(0),i=Object(l.a)(o,2),s=i[0],u=i[1];return console.log("RENDERED: ProductInput (".concat(e,")")),Object(j.jsx)(ht.a,{variant:"outlined",inputProps:{className:"order__form__table__product__select"},value:s,onChange:function(t){var r=t.target.value,o={product:a[r],rowIndex:e};u(r),n(),c({type:"set_product",data:o}),c({type:"reset_quantity",rowIndex:e})},children:a.map((function(t,e){return Object(j.jsx)(bt.a,{value:e,children:t.sku},e)}))})},pt=function(t){var e=t.rowIndex,n=t.inventory,a=t.quantity,r=y(),c=r.hideTotal,o=r.showAlert,i=X().dispatch;return console.log("RENDERED: ProductQuantityInput (".concat(e,")")),Object(j.jsx)(H.a,{type:"number",variant:"outlined",label:"Avail: ".concat(n),inputProps:{min:0,max:n+1,className:"order__form__table__product__input"},onChange:function(t){var a=t.target.value,r={rowIndex:e,quantity:a};a<1?(c(),i({type:"remove_product",rowIndex:e})):a>n?o({open:!0,severity:"warning",message:"Not enough in inventory."}):(console.log(r),c(),i({type:"set_quantity",data:r}))},value:a})},Ot=function(t){var e=t.product,n=t.index;return console.log("RENDERED: ProductRow (".concat(n,")")),Object(j.jsxs)(ct.a,{children:[Object(j.jsx)(it.a,{children:Object(j.jsx)(xt,{rowIndex:n})}),Object(j.jsx)(it.a,{children:e.name}),Object(j.jsx)(it.a,{align:"right",children:Object(j.jsx)(pt,{rowIndex:n,inventory:e.inventory,quantity:e.quantity})}),Object(j.jsx)(it.a,{align:"right",children:rt(e.price)}),Object(j.jsx)(it.a,{align:"right",children:rt(e.quantity*e.price)})]})},vt=r.a.memo(Ot),ft=function(t){var e=t.invoice,n=t.discountRate,a=r.a.useMemo((function(){return t=function(t,e){var n={subtotal:0,discount:0,taxes:0,total:0,discountRate:e};return t&&t.length>0&&(n.subtotal=t.map((function(t){return t.price*t.quantity})).reduce((function(t,e){return t+e}),0),n.discount=e*n.subtotal,n.taxes=.085*n.subtotal,n.total=n.subtotal+n.taxes-n.discount),n}(e,n),Object(u.a)(Object(u.a)({},t),{},{taxPercentage:"".concat(8.5.toFixed(1)," %"),discountPercentage:"".concat((100*t.discountRate).toFixed(1)," %"),subtotalFormatted:rt(t.subtotal),discountFormatted:"(".concat(rt(t.discount),")"),taxesFormatted:rt(t.taxes),totalFormatted:rt(t.total)});var t}),[e,n]),c=a.subtotalFormatted,o=a.discountFormatted,i=a.taxesFormatted,s=a.totalFormatted,l=a.taxPercentage,d=a.discountPercentage;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(ct.a,{children:[Object(j.jsx)(it.a,{rowSpan:4,colSpan:2}),Object(j.jsx)(it.a,{colSpan:2,children:"Subtotal"}),Object(j.jsx)(it.a,{align:"right",children:c})]}),Object(j.jsxs)(ct.a,{children:[Object(j.jsx)(it.a,{children:"Discount"}),Object(j.jsx)(it.a,{align:"right",children:d}),Object(j.jsx)(it.a,{align:"right",children:o})]}),Object(j.jsxs)(ct.a,{children:[Object(j.jsx)(it.a,{children:"Tax"}),Object(j.jsx)(it.a,{align:"right",children:l}),Object(j.jsx)(it.a,{align:"right",children:i})]}),Object(j.jsxs)(ct.a,{children:[Object(j.jsx)(it.a,{colSpan:2,children:"Total"}),Object(j.jsx)(it.a,{align:"right",children:s})]})]})};ft.defaultProps={invoice:[],discountRate:0};var mt=ft,gt=n(77),yt=n(188),_t=n(6),wt=n.n(_t),Ct=n(184),Pt=function(t){return Object(j.jsx)(Ct.a,Object(u.a)({elevation:6,variant:"filled"},t))};Pt.propTpes={onClose:wt.a.func,severity:wt.a.string,children:wt.a.element.isRequired},Pt.defaultProps={onClose:function(){},severity:"info"};var Et=Pt,Dt=function(t){var e=t.alert,n=t.onClose,a=t.duration,r=Object(gt.a)(t,["alert","onClose","duration"]);return Object(j.jsx)(yt.a,Object(u.a)(Object(u.a)({open:e.open,autoHideDuration:a,onClose:n},r),{},{children:Object(j.jsx)(Et,{onClose:n,severity:e.severity,children:e.message})}))};Dt.defaultProps={alert:{open:!1,severity:"info",message:""},onClose:function(){},duration:6e3};var It=Dt,Nt=function(){var t=r.a.useContext(f),e=t.calculate,n=t.alert,a=y(),c=a.hideAlert,o=a.hideTotal,i=a.showAlert,s=D().state,l=X(),u=l.state,d=l.dispatch,h=F(),b=h.state,x=h.dispatch,p=r.a.useCallback((function(t){t.preventDefault(),b.length>0?(o(),d({type:"add_product",data:b})):A.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com/","/products")).then((function(t){var e=t.data;e.length>0?(e.sort((function(t,e){return t.sku.localeCompare(e.sku)})),o(),x({type:"set_products",data:e}),d({type:"add_product",data:e})):i({open:!0,severity:"warning",message:"No products in system"})})).catch((function(t){i({open:!0,severity:"error",message:"Fail to retrieve Products"}),console.log("Error: ".concat(JSON.stringify(t)))}))}),[d,x,o,b,i]);r.a.useEffect((function(){var t=function(t){var e={valid:!0,message:""},n={},a=t.length;if(a>1)for(var r=0;r<a;r++){if(n[t[r].sku]){e={valid:!1,message:"Duplicate product in cart"};break}n[t[r].sku]=!0}return e}(u),e=t.valid,n=t.message;e?c():i({open:!0,severity:"warning",message:n})}),[i,c,u]);return console.log("RENDERED: OrderForm"),Object(j.jsxs)(tt.a,{component:T.a,elevation:3,className:"order__form",children:[Object(j.jsxs)(et.a,{"aria-label":"order product",children:[Object(j.jsx)(jt,{onClick:p}),u.length>0&&Object(j.jsxs)(nt.a,{children:[u.map((function(t,e){return Object(j.jsx)(vt,{index:e,product:t,onChange:function(t){}},e)})),e&&Object(j.jsx)(mt,{invoice:u,discountRate:s.discount})]})]}),Object(j.jsx)(It,{alert:n,onClose:function(t,e){"clickaway"!==e&&c()}})]})},kt=function(){return console.log("RENDERED: OrderSection"),Object(j.jsx)(V,{children:Object(j.jsx)("form",{children:Object(j.jsxs)(J.a,{container:!0,justify:"space-between",alignItems:"center",spacing:2,children:[Object(j.jsx)(J.a,{item:!0,md:4,xs:12,children:Object(j.jsx)($,{})}),Object(j.jsx)(J.a,{item:!0,md:8,xs:12,children:Object(j.jsx)(Nt,{})})]})})})},Rt=function(){return Object(j.jsx)(_.a,{maxWidth:!1,className:"landing",children:Object(j.jsxs)(E,{children:[Object(j.jsx)(Q,{}),Object(j.jsx)(R,{children:Object(j.jsx)(kt,{})})]})})};var Ft=function(){return Object(j.jsx)(i.b,{injectFirst:!0,children:Object(j.jsxs)(g,{children:[Object(j.jsx)(s.a,{}),Object(j.jsx)(Rt,{})]})})},St=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),c(t),o(t)}))};o.a.render(Object(j.jsx)(Ft,{}),document.getElementById("root")),St()},98:function(t,e,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.de5a85a7.chunk.js.map