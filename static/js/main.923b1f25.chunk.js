(this["webpackJsonpwarehouse-pos"]=this["webpackJsonpwarehouse-pos"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=(n(98),n(183)),s=n(180),l=n(22),u=n(14),d=n(27),j=n(2),b="SHOW_TOTAL",h="HIDE_TOTAL",x="SHOW_ALERT",p="HIDE_ALERT",O=function(e,t){switch(t.type){case b:return console.log("Reducer Show Total"),e.calculate=!0,e;case h:return e.calculate=!1,e;case x:return e.alert=Object(u.a)(Object(u.a)({},e.alert),t.data),e;case p:return e.alert.open=!1,e}},v={calculate:!1,alert:{open:!1,severity:"info",message:""}},f=r.a.createContext(v),m=r.a.createContext(void 0),g=function(e){var t=e.children,n=Object(d.a)(O,v),a=Object(l.a)(n,2),r=a[0],c=a[1];return Object(j.jsx)(f.Provider,{value:r,children:Object(j.jsx)(m.Provider,{value:c,children:t})})},y=function(){var e=r.a.useContext(m);if(void 0===e)throw new Error("useDisplayDispatch must be used within a DisplayProvider");var t=r.a.useCallback((function(){e({type:b})}),[e]),n=r.a.useCallback((function(){e({type:h})}),[e]),a=r.a.useCallback((function(t){e({type:x,data:t})}),[e]),c=r.a.useCallback((function(){e({type:p})}),[e]);return r.a.useMemo((function(){return{showTotal:t,hideTotal:n,showAlert:a,hideAlert:c}}),[t,n,a,c])},_=n(171),C={id:"",name:"",company:"",discount:0},w=r.a.createContext({state:C,dispatch:function(){}}),P=function(e,t){switch(t.type){case"set_contractor":return t.data;case"close":return C}},D=function(e){var t=e.children,n=Object(d.a)(P,C),a=Object(l.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(j.jsx)(w.Provider,{value:r,children:t})},E=function(){var e=r.a.useContext(w);if(void 0===e)throw new Error("useContractor must be used within a ContractorProvider");return e},k="SET_PRODUCTS",I="SORT_PRODUCTS",N=function(e,t){switch(t.type){case k:return e.concat(t.data);case I:return e.sort((function(e,t){return e.sku.localeCompare(t.sku)}))}},R=[{id:"",name:"",price:0,sku:"*None*",inventory:1}],S=r.a.createContext(R),T=r.a.createContext(void 0),F=function(e){var t=e.children,n=Object(d.a)(N,R),a=Object(l.a)(n,2),r=a[0],c=a[1];return Object(j.jsx)(S.Provider,{value:r,children:Object(j.jsx)(T.Provider,{value:c,children:t})})},q=function(){return r.a.useContext(S)},A=n(49),H=n(170),L=n(50),U=n.n(L),J=n(186),W=n(167),M=n(164),B=function(e){var t=e.value,n=e.onChange,a=e.onSubmit;return Object(j.jsx)("form",{onSubmit:a,className:"contractor__form",children:Object(j.jsxs)(M.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsx)(M.a,{item:!0,xs:4,children:Object(j.jsx)(W.a,{variant:"subtitle1",children:"Contactor ID:"})}),Object(j.jsx)(M.a,{item:!0,xs:8,children:Object(j.jsx)(J.a,{id:"id",variant:"outlined",inputProps:{className:"contractor__form__input"},value:t,onChange:n,required:!0})})]})})};B.defaultProps={value:"",onChange:function(){},onSubmit:function(){}};var Q=B,z=function(e){var t=e.contractor;return Object(j.jsxs)(M.a,{container:!0,justify:"flex-start",alignItems:"center",children:[Object(j.jsxs)(M.a,{container:!0,item:!0,xs:12,spacing:1,children:[Object(j.jsx)(M.a,{item:!0,xs:4,children:Object(j.jsx)(W.a,{variant:"subtitle1",children:"Name:"})}),Object(j.jsx)(M.a,{item:!0,xs:8,children:Object(j.jsx)(W.a,{variant:"body1",children:t.name})})]}),Object(j.jsxs)(M.a,{container:!0,item:!0,xs:12,children:[Object(j.jsx)(M.a,{item:!0,xs:4,children:Object(j.jsx)(W.a,{variant:"subtitle1",children:"Company:"})}),Object(j.jsx)(M.a,{item:!0,xs:8,children:Object(j.jsx)(W.a,{variant:"body1",children:t.company})})]})]})};z.defaultProps={contractor:{name:"",company:""}};var G=z,K=function(){var e=E(),t=e.state,n=e.dispatch,a=y(),r=a.showAlert,c=a.hideTotal;return Object(j.jsx)(H.a,{elevation:3,className:"contractor",children:Object(j.jsxs)(_.a,{maxWidth:"sm",className:"contractor__container",children:[Object(j.jsx)(Q,{onSubmit:function(e){var a;e.preventDefault(),(a=t,U.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com","/contractors/").concat(encodeURIComponent(a.id)))).then((function(e){var t=e.data;r({open:!0,severity:"success",message:"Contractor Retrieved"}),c(),n({type:"set_contractor",data:t})})).catch((function(e){r({open:!0,severity:"error",message:"Fail to retrieve Contractor"}),console.log("Error: ".concat(JSON.stringify(e)))}))},onChange:function(e){var a=e.target,r=a.id,c=a.value,o=Object(u.a)(Object(u.a)({},t),{},Object(A.a)({},r,c));n({type:"set_contractor",data:o})},value:t.id}),Object(j.jsx)(G,{contractor:t})]})})},V=[],X=r.a.createContext({state:V,dispatch:function(){}}),Y=function(e,t){switch(t.type){case"close":return e=V;case"add_product":return e.push(Object(u.a)(Object(u.a)({},t.data[0]),{},{quantity:1})),e;case"set_product":return e[t.data.rowIndex]=Object(u.a)(Object(u.a)({},e[t.data.rowIndex]),t.data.product),e;case"remove_product":return e.splice(t.rowIndex,1),e;case"set_quantity":return e[t.data.rowIndex].quantity=t.data.quantity,e;case"reset_quantity":return e[t.rowIndex].quantity=1,e}},Z=function(e){var t=e.children,n=Object(d.a)(Y,V),a=Object(l.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(j.jsx)(X.Provider,{value:r,children:t})},$=function(){var e=r.a.useContext(X);if(void 0===e)throw new Error("useInvoice must be used within a InvoiceProvider");return e},ee=n(182),te=n(172),ne=function(){var e=y(),t=e.showTotal,n=e.hideTotal,a=E().dispatch,r=$().dispatch;return Object(j.jsxs)(ee.a,{display:"flex",flexDirection:"column",className:"order__controls",children:[Object(j.jsx)(ee.a,{p:.5,children:Object(j.jsx)(te.a,{type:"submit",variant:"contained",color:"primary",className:"order__controls__button",onClick:function(e){e.preventDefault(),t()},children:"Calculate"})}),Object(j.jsx)(ee.a,{p:.5,flexGrow:1,children:Object(j.jsx)(te.a,{type:"print",variant:"contained",color:"primary",className:"order__controls__button",children:"Print"})}),Object(j.jsx)(ee.a,{p:.5,children:Object(j.jsx)(te.a,{type:"clear",variant:"contained",color:"secondary",className:"order__controls__button",onClick:function(e){e.preventDefault(),n(),a({type:"close"}),r({type:"close"})},children:"Close"})})]})},ae=n(177),re=n(178),ce=n(179),oe=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),ie=function(e){return oe.format(e/100)},se=n(174),le=n(173),ue=n(175),de=n(176),je=n(76),be=n.n(je),he=function(e){var t=e.onClick;return console.log("RENDERED: OrderTableHeader"),Object(j.jsxs)(le.a,{children:[Object(j.jsxs)(se.a,{children:[Object(j.jsx)(ue.a,{align:"center",children:Object(j.jsx)(de.a,{size:"small",color:"primary","aria-label":"add to invoice",onClick:t,children:Object(j.jsx)(be.a,{})})}),Object(j.jsx)(ue.a,{align:"center",colSpan:3,children:"Order Form"}),Object(j.jsx)(ue.a,{align:"right",children:"Price"})]}),Object(j.jsxs)(se.a,{children:[Object(j.jsx)(ue.a,{children:"Part No."}),Object(j.jsx)(ue.a,{children:"Desc"}),Object(j.jsx)(ue.a,{align:"right",children:"Qty."}),Object(j.jsx)(ue.a,{align:"right",children:"Unit"}),Object(j.jsx)(ue.a,{align:"right",children:"Sum"})]})]})};he.defaultProps={onClick:function(){}};var xe=he,pe=n(181),Oe=n(191),ve=function(e){var t=e.rowIndex,n=y().hideTotal,a=q(),c=$().dispatch,o=r.a.useState(0),i=Object(l.a)(o,2),s=i[0],u=i[1];return console.log("RENDERED: ProductInput (".concat(t,")")),Object(j.jsx)(pe.a,{variant:"outlined",inputProps:{className:"order__form__table__product__select"},value:s,onChange:function(e){var r=e.target.value,o=a[r],i={product:o,rowIndex:t};"*None*"===o.sku?c({type:"remove_product",rowIndex:t}):(u(r),n(),c({type:"set_product",data:i}),c({type:"reset_quantity",rowIndex:t}))},children:a.map((function(e,t){return Object(j.jsx)(Oe.a,{value:t,children:e.sku},t)}))})},fe=function(e){var t=e.rowIndex,n=e.inventory,a=e.quantity,r=y(),c=r.hideTotal,o=r.showAlert,i=$().dispatch;return console.log("RENDERED: ProductQuantityInput (".concat(t,")")),Object(j.jsx)(J.a,{type:"number",variant:"outlined",label:"Avail: ".concat(n),inputProps:{min:0,max:n+1,className:"order__form__table__product__input"},onChange:function(e){var a=e.target.value,r={rowIndex:t,quantity:a};a<1?(c(),i({type:"remove_product",rowIndex:t})):a>n?o({open:!0,severity:"warning",message:"Not enough in inventory."}):(console.log(r),c(),i({type:"set_quantity",data:r}))},value:a})},me=function(e){var t=e.product,n=e.index;return console.log("RENDERED: ProductRow (".concat(n,")")),Object(j.jsxs)(se.a,{children:[Object(j.jsx)(ue.a,{children:Object(j.jsx)(ve,{rowIndex:n})}),Object(j.jsx)(ue.a,{children:t.name}),Object(j.jsx)(ue.a,{align:"right",children:Object(j.jsx)(fe,{rowIndex:n,inventory:t.inventory,quantity:t.quantity})}),Object(j.jsx)(ue.a,{align:"right",children:ie(t.price)}),Object(j.jsx)(ue.a,{align:"right",children:ie(t.quantity*t.price)})]})},ge=r.a.memo(me),ye=function(e){var t=e.invoice,n=e.discountRate,a=r.a.useMemo((function(){return e=function(e,t){var n={subtotal:0,discount:0,taxes:0,total:0,discountRate:t};return e&&e.length>0&&(n.subtotal=e.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t}),0),n.discount=t*n.subtotal,n.taxes=.085*n.subtotal,n.total=n.subtotal+n.taxes-n.discount),n}(t,n),Object(u.a)(Object(u.a)({},e),{},{taxPercentage:"".concat(8.5.toFixed(1)," %"),discountPercentage:"".concat((100*e.discountRate).toFixed(1)," %"),subtotalFormatted:ie(e.subtotal),discountFormatted:"(".concat(ie(e.discount),")"),taxesFormatted:ie(e.taxes),totalFormatted:ie(e.total)});var e}),[t,n]),c=a.subtotalFormatted,o=a.discountFormatted,i=a.taxesFormatted,s=a.totalFormatted,l=a.taxPercentage,d=a.discountPercentage;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(se.a,{children:[Object(j.jsx)(ue.a,{rowSpan:4,colSpan:2}),Object(j.jsx)(ue.a,{colSpan:2,children:"Subtotal"}),Object(j.jsx)(ue.a,{align:"right",children:c})]}),Object(j.jsxs)(se.a,{children:[Object(j.jsx)(ue.a,{children:"Discount"}),Object(j.jsx)(ue.a,{align:"right",children:d}),Object(j.jsx)(ue.a,{align:"right",children:o})]}),Object(j.jsxs)(se.a,{children:[Object(j.jsx)(ue.a,{children:"Tax"}),Object(j.jsx)(ue.a,{align:"right",children:l}),Object(j.jsx)(ue.a,{align:"right",children:i})]}),Object(j.jsxs)(se.a,{children:[Object(j.jsx)(ue.a,{colSpan:2,children:"Total"}),Object(j.jsx)(ue.a,{align:"right",children:s})]})]})};ye.defaultProps={invoice:[],discountRate:0};var _e=ye,Ce=n(77),we=n(188),Pe=n(6),De=n.n(Pe),Ee=n(184),ke=function(e){return Object(j.jsx)(Ee.a,Object(u.a)({elevation:6,variant:"filled"},e))};ke.propTpes={onClose:De.a.func,severity:De.a.string,children:De.a.element.isRequired},ke.defaultProps={onClose:function(){},severity:"info"};var Ie=ke,Ne=function(e){var t=e.alert,n=e.onClose,a=e.duration,r=Object(Ce.a)(e,["alert","onClose","duration"]);return Object(j.jsx)(we.a,Object(u.a)(Object(u.a)({open:t.open,autoHideDuration:a,onClose:n},r),{},{children:Object(j.jsx)(Ie,{onClose:n,severity:t.severity,children:t.message})}))};Ne.defaultProps={alert:{open:!1,severity:"info",message:""},onClose:function(){},duration:6e3};var Re=Ne,Se=function(){var e=r.a.useContext(f),t=e.calculate,n=e.alert,a=y(),c=a.hideAlert,o=a.hideTotal,i=a.showAlert,s=E().state,l=$(),u=l.state,d=l.dispatch,b=q(),h=function(){var e=r.a.useContext(T);if(void 0===e)throw new Error("useProductDispatch must be used within a ProductProvider");var t=r.a.useCallback((function(t){e({type:k,data:t})}),[e]),n=r.a.useCallback((function(){e({type:I})}),[e]);return r.a.useMemo((function(){return{setProducts:t,sortProducts:n}}),[t,n])}().setProducts,x=r.a.useCallback((function(e){e.preventDefault(),console.log(b),b.length>1?(o(),d({type:"add_product",data:b})):U.a.get("".concat("https://enigmatic-waters-63171.herokuapp.com","/products")).then((function(e){var t=e.data;t.length>0?(t.sort((function(e,t){return e.sku.localeCompare(t.sku)})),o(),h(t),d({type:"add_product",data:t})):i({open:!0,severity:"warning",message:"No products in system"})})).catch((function(e){i({open:!0,severity:"error",message:"Fail to retrieve Products"}),console.log("Error: ".concat(JSON.stringify(e)))}))}),[b,d,o,h,i]);r.a.useEffect((function(){var e=function(e){var t={valid:!0,message:""},n={},a=e.length;if(a>1)for(var r=0;r<a;r++){if(n[e[r].sku]){t={valid:!1,message:"Duplicate product in cart"};break}n[e[r].sku]=!0}return t}(u),t=e.valid,n=e.message;t?c():i({open:!0,severity:"warning",message:n})}),[i,c,u]);return console.log("RENDERED: OrderForm"),Object(j.jsxs)(ae.a,{component:H.a,elevation:3,className:"order__form",children:[Object(j.jsxs)(re.a,{"aria-label":"order product",children:[Object(j.jsx)(xe,{onClick:x}),u.length>0&&Object(j.jsxs)(ce.a,{children:[u.map((function(e,t){return Object(j.jsx)(ge,{index:t,product:e,onChange:function(e){}},t)})),t&&Object(j.jsx)(_e,{invoice:u,discountRate:s.discount})]})]}),Object(j.jsx)(Re,{alert:n,onClose:function(e,t){"clickaway"!==t&&c()}})]})},Te=function(){return console.log("RENDERED: OrderSection"),Object(j.jsx)(Z,{children:Object(j.jsx)("form",{children:Object(j.jsxs)(M.a,{container:!0,justify:"space-between",alignItems:"center",spacing:2,children:[Object(j.jsx)(M.a,{item:!0,md:4,xs:12,children:Object(j.jsx)(ne,{})}),Object(j.jsx)(M.a,{item:!0,md:8,xs:12,children:Object(j.jsx)(Se,{})})]})})})},Fe=function(){return Object(j.jsx)(_.a,{maxWidth:!1,className:"landing",children:Object(j.jsxs)(D,{children:[Object(j.jsx)(K,{}),Object(j.jsx)(F,{children:Object(j.jsx)(Te,{})})]})})};var qe=function(){return Object(j.jsx)(i.b,{injectFirst:!0,children:Object(j.jsxs)(g,{children:[Object(j.jsx)(s.a,{}),Object(j.jsx)(Fe,{})]})})},Ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(j.jsx)(qe,{}),document.getElementById("root")),Ae()},98:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.923b1f25.chunk.js.map